{% include "header.html" %}

<div id="componentContainer" class="p-4"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const formData = JSON.parse({{ form_data | tojson | safe }});
    window.componentRenderer.renderPage(formData, "#componentContainer");

    // Example: Handle form submission with dynamic data
    $(document).on('submit', '#dynamic-form', function (e) {
        e.preventDefault();
        const $form = $(this);
        const isValid = window.componentRenderer.validateForm($form);

        if (isValid) {
            const formData = getFormData($form);
            console.log("Form Data:", formData);

            // You can send this data to your FastAPI endpoint
            // For example:
            $.ajax({
                url: $form.attr('action'),
                method: $form.attr('method'),
                contentType: 'application/json',
                data: JSON.stringify(formData),
                success: function (response) {
                    showSuccess("Formul치rio enviado com sucesso!");
                    console.log("Response:", response);
                },
                error: function (xhr, status, error) {
                    showError("Erro ao enviar formul치rio.");
                    console.error("Error:", error);
                }
            });

            showSuccess("Formul치rio simulado enviado com sucesso!");
        } else {
            showError("Por favor, corrija os erros no formul치rio.");
        }
    });
    });
</script>

{% include "footer.html" %}